meta:
  project: "converter_req"
  converter_type: "dc-dc"   # or "dc-ac", "inverter", "grid-tie"
  fsw_hz: 100000
  Ts_ctrl_s: 1e-5

operating_envelope:
  vin_V:
    min: 80
    nominal: 100
    max: 120
  vout_V:
    nominal: 50
    tolerance_pct: 1.0
  load:
    mode: "resistive"     # "constant_power" or "resistive"
    iout_A:
      min: 0.5
      max: 50
  tests:
    load_step:
      - { from_pct: 10, to_pct: 90, edge_s: 0 }   # ideal step
      - { from_pct: 50, to_pct: 100, edge_s: 1e-3 }

ripple_requirements:
  vout_ripple:
    metric: "peak_to_peak"
    max_mV: 200                  # or max_pct
    measurement_bw_Hz: 200000
  inductor_current_ripple:
    metric: "peak_to_peak"
    max_pct_of_iout: 30          # common: 20â€“40% for CCM designs
  dc_link_ripple:
    enabled: false
    max_mV: 0

transient_requirements:
  voltage_deviation:
    max_dip_pct: 5               # undershoot during load step
    max_overshoot_pct: 5
  timing:
    settling_time_ms: 5          # to within tolerance band
    recovery_time_ms: 2
  current_limit:
    i_peak_A: 80
    limit_mode: "cycle_by_cycle" # or "foldback", "hiccup"

passive_design:
  inductor:
    design_variable: true
    L_uH:
      min: 30
      max: 1500
    constraints:
      I_rms_A_max: 60
      I_peak_A_max: 80
      I_sat_A_min: 100           # sat margin requirement
      DCR_mOhm_max: 10
  capacitor:
    design_variable: true
    Cout_uF:
      min: 100
      max: 3000
    constraints:
      ESR_mOhm_max: 200
      ripple_current_A_rms_max: 8
      voltage_rating_V_min: 63

control_requirements:
  objectives:
    - "tight_voltage_regulation"
    - "fast_load_transient"
    - "bounded_current"
  loop_specs:
    bandwidth_Hz:
      target: 1000
      min: 500
      max: 2000
    stability_margins:
      phase_margin_deg_min: 45
      gain_margin_dB_min: 6
  implementation_limits:
    duty_slew_max_per_sample: 0.05
    anti_windup: true
    sensor_noise_rms:
      vout_mV: 5
      iL_mA: 50
